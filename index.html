<!-- Shared engine -->
<script src="/engine.js" defer></script>

<!-- Dynamic per-teacher script loader -->
<script>
(function(){
  const url = new URL(window.location.href);

  // teacher key from /path OR from ?game=
  let key = url.searchParams.get('game');
  if (!key) {
    const seg = url.pathname.replace(/\/+$/,'').split('/').filter(Boolean).pop();
    key = seg || 'example'; // default
  }

  const s = document.createElement('script');
  s.defer = true;
  s.src = `/scripts/${key}.js?v=${Date.now()}`; // cache-bust while testing

  // Fallback to example if missing
  s.onerror = () => {
    const f = document.createElement('script');
    f.defer = true;
    f.src = `/scripts/example.js?v=${Date.now()}`;
    document.body.appendChild(f);
  };

  document.body.appendChild(s);
})();
</script>

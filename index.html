<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mission: Reinforceable — Multi-Step Scenarios</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div id="game-container">
    <h1>Behavioral Intervention Simulator</h1>
    <h2 id="scenario-title">Mission: Reinforceable</h2>

    <!-- Toolbar -->
    <div id="toolbar">
      <div id="teacher-badge">Teacher: <span id="teacher-code">—</span></div>
      <div id="score-badge">Points: <span id="points">0</span></div>
      <div class="spacer"></div>
      <button id="home-btn" class="ghost">Home</button>
    </div>

    <!-- Game area -->
    <div id="story-text"></div>
    <div id="choices"></div>
  </div>

  <!-- Shared game engine (used by all teacher versions) -->
  <script src="/engine.js" defer></script>

  <!-- Dynamic loader that picks the correct teacher script -->
  <script>
  (function(){
    const url = new URL(window.location.href);

    // Determine which teacher/game script to load
    let key = url.searchParams.get('game');
    if (!key) {
      const seg = url.pathname.replace(/\/+$/,'').split('/').filter(Boolean).pop();
      key = seg || 'example'; // default to "example" if none provided
    }

    // Create a <script> tag for the correct teacher script
    const s = document.createElement('script');
    s.defer = true;
    s.src = `/scripts/${key}.js?v=${Date.now()}`; // cache-bust while testing

    // If that file doesn't exist, fallback to example.js
    s.onerror = () => {
      const f = document.createElement('script');
      f.defer = true;
      f.src = `/scripts/example.js?v=${Date.now()}`;
      document.body.appendChild(f);
    };

    document.body.appendChild(s);
  })();
  </script>
</body>
</html>
